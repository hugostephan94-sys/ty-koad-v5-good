(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{980:function(e,s,t){Promise.resolve().then(t.bind(t,1130))},1130:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return r}});var a=t(7437),l=t(2265);function r(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)({icalC1:"",icalC2:""}),[n,i]=(0,l.useState)("");(0,l.useEffect)(()=>{fetch("/api/reservations/list").then(e=>e.json()).then(e=>s(e.reservations||[])),fetch("/api/config/get").then(e=>e.json()).then(r)},[]);let c=async()=>{let e=await fetch("/api/config/set",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});r(await e.json()),i("Configuration enregistr\xe9e."),setTimeout(()=>i(""),2500)};return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-12 md:py-16",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Admin — Ty-Koad"}),(0,a.jsx)("a",{href:"/",className:"px-4 py-2 rounded-xl border",children:"Accueil"})]}),(0,a.jsxs)("section",{className:"mt-6 bg-white border border-stone-200 rounded-2xl p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"iCal"}),(0,a.jsx)("p",{className:"text-sm text-stone-600",children:"Renseignez vos URLs iCal et exportez l’ICS du site."}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-3 mt-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-stone-600",children:"URL iCal — C1"}),(0,a.jsx)("input",{className:"mt-1 w-full rounded-xl border border-stone-300 p-2",value:t.icalC1||"",onChange:e=>r(s=>({...s,icalC1:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-stone-600",children:"URL iCal — C2"}),(0,a.jsx)("input",{className:"mt-1 w-full rounded-xl border border-stone-300 p-2",value:t.icalC2||"",onChange:e=>r(s=>({...s,icalC2:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex gap-3",children:[(0,a.jsx)("button",{onClick:c,className:"px-4 py-2 rounded-xl bg-emerald-700 hover:bg-emerald-800 text-white shadow-sm",children:"Enregistrer"}),(0,a.jsx)("a",{className:"px-4 py-2 rounded-xl border",href:"/api/ical/C1",target:"_blank",children:"Exporter ICS C1"}),(0,a.jsx)("a",{className:"px-4 py-2 rounded-xl border",href:"/api/ical/C2",target:"_blank",children:"Exporter ICS C2"}),n&&(0,a.jsx)("div",{className:"text-sm text-emerald-700",children:n})]})]}),(0,a.jsxs)("section",{className:"mt-6 bg-white border border-stone-200 rounded-2xl p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"R\xe9servations"}),(0,a.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left",children:[(0,a.jsx)("th",{className:"py-2 pr-4",children:"Cr\xe9\xe9e"}),(0,a.jsx)("th",{className:"py-2 pr-4",children:"Client"}),(0,a.jsx)("th",{className:"py-2 pr-4",children:"S\xe9jour"}),(0,a.jsx)("th",{className:"py-2 pr-4",children:"Montant"}),(0,a.jsx)("th",{className:"py-2 pr-4",children:"Caution"}),(0,a.jsx)("th",{className:"py-2 pr-4",children:"PI"}),(0,a.jsx)("th",{className:"py-2",children:"PI Caution"})]})}),(0,a.jsx)("tbody",{children:(e||[]).map((e,s)=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"py-2 pr-4",children:new Date(e.createdAt).toLocaleString()}),(0,a.jsxs)("td",{className:"py-2 pr-4",children:[e.name," (",e.email,")"]}),(0,a.jsxs)("td",{className:"py-2 pr-4",children:[e.ci," → ",e.co," (",e.nights," n) [",e.chalet,"]"]}),(0,a.jsxs)("td",{className:"py-2 pr-4",children:[e.amountEUR," €"]}),(0,a.jsxs)("td",{className:"py-2 pr-4",children:[e.depositEUR," €"]}),(0,a.jsx)("td",{className:"py-2 pr-4",children:(0,a.jsx)("code",{children:e.paymentIntentId})}),(0,a.jsx)("td",{className:"py-2",children:(0,a.jsx)("code",{children:e.depositIntentId})})]},s))})]})})]})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=980)}),_N_E=e.O()}]);