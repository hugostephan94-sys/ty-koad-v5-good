"use strict";(()=>{var t={};t.id=895,t.ids=[895],t.modules={399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3292:t=>{t.exports=require("fs/promises")},1017:t=>{t.exports=require("path")},3176:(t,e,a)=>{a.r(e),a.d(e,{originalPathname:()=>w,patchFetch:()=>y,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>p});var i={};a.r(i),a.d(i,{POST:()=>c});var n=a(9303),r=a(8716),s=a(670),o=a(7070),u=a(8847);async function c(t){try{let e=await t.json(),a=await (0,u.v6)(e);return o.NextResponse.json(a)}catch(t){return o.NextResponse.json({error:t.message},{status:400})}}let l=new n.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/config/set/route",pathname:"/api/config/set",filename:"route",bundlePath:"app/api/config/set/route"},resolvedPagePath:"C:\\Users\\Nina\\Downloads\\ty-koad-v5_1\\ty-koad-demo-v5.1\\app\\api\\config\\set\\route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:f}=l,w="/api/config/set/route";function y(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:p})}},8847:(t,e,a)=>{a.d(e,{$:()=>m,KQ:()=>p,bA:()=>w,iD:()=>f,iE:()=>y,k3:()=>S,v6:()=>g});var i=a(3292),n=a.n(i),r=a(1017),s=a.n(r);let o=s().join(process.cwd(),"data"),u=s().join(o,"reservations.json"),c=s().join(o,"config.json"),l=s().join(o,"vouchers.json");async function d(){await n().mkdir(o,{recursive:!0});try{await n().access(u)}catch{await n().writeFile(u,"[]","utf-8")}try{await n().access(c)}catch{await n().writeFile(c,JSON.stringify({icalC1:"",icalC2:""},null,2),"utf-8")}try{await n().access(l)}catch{await n().writeFile(l,"[]","utf-8")}}async function p(){return await d(),JSON.parse(await n().readFile(u,"utf-8")||"[]")}async function f(t){await d();let e=await p();return e.unshift({...t,createdAt:new Date().toISOString()}),await n().writeFile(u,JSON.stringify(e,null,2),"utf-8"),{ok:!0}}async function w({paymentIntentId:t,...e}){await d();let a=await p(),i=a.findIndex(e=>e.paymentIntentId===t);return i>=0&&(a[i]={...a[i],...e}),await n().writeFile(u,JSON.stringify(a,null,2),"utf-8"),{ok:!0}}async function y(){return await d(),JSON.parse(await n().readFile(c,"utf-8")||"{}")}async function g(t){let e={...await y(),...t};return await n().writeFile(c,JSON.stringify(e,null,2),"utf-8"),e}let v=async()=>(await d(),JSON.parse(await n().readFile(l,"utf-8")||"[]")),h=async t=>n().writeFile(l,JSON.stringify(t,null,2),"utf-8");async function m(t){let e=await v();if(e.some(e=>e.code===t.code))throw Error("Code d\xe9j\xe0 existant");return e.unshift({...t,createdAt:new Date().toISOString(),status:"active",redemptions:[]}),await h(e),t}async function S(t){return(await v()).find(e=>e.stripeSessionId===t)||null}}};var e=require("../../../../webpack-runtime.js");e.C(t);var a=t=>e(e.s=t),i=e.X(0,[948,972],()=>a(3176));module.exports=i})();