"use strict";(()=>{var e={};e.id=17,e.ids=[17],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3292:e=>{e.exports=require("fs/promises")},1017:e=>{e.exports=require("path")},613:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>w,staticGenerationAsyncStorage:()=>p});var i={};a.r(i),a.d(i,{POST:()=>c});var r=a(9303),n=a(8716),s=a(670),o=a(7070),u=a(8847);async function c(e){try{let t=await e.json();return await (0,u.iD)(t),o.NextResponse.json({ok:!0})}catch(e){return o.NextResponse.json({error:e.message},{status:400})}}let l=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/reservations/save/route",pathname:"/api/reservations/save",filename:"route",bundlePath:"app/api/reservations/save/route"},resolvedPagePath:"C:\\Users\\Nina\\Downloads\\ty-koad-v5_1\\ty-koad-demo-v5.1\\app\\api\\reservations\\save\\route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:w}=l,f="/api/reservations/save/route";function v(){return(0,s.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:p})}},8847:(e,t,a)=>{a.d(t,{$:()=>g,KQ:()=>p,bA:()=>f,iD:()=>w,iE:()=>v,k3:()=>S,v6:()=>y});var i=a(3292),r=a.n(i),n=a(1017),s=a.n(n);let o=s().join(process.cwd(),"data"),u=s().join(o,"reservations.json"),c=s().join(o,"config.json"),l=s().join(o,"vouchers.json");async function d(){await r().mkdir(o,{recursive:!0});try{await r().access(u)}catch{await r().writeFile(u,"[]","utf-8")}try{await r().access(c)}catch{await r().writeFile(c,JSON.stringify({icalC1:"",icalC2:""},null,2),"utf-8")}try{await r().access(l)}catch{await r().writeFile(l,"[]","utf-8")}}async function p(){return await d(),JSON.parse(await r().readFile(u,"utf-8")||"[]")}async function w(e){await d();let t=await p();return t.unshift({...e,createdAt:new Date().toISOString()}),await r().writeFile(u,JSON.stringify(t,null,2),"utf-8"),{ok:!0}}async function f({paymentIntentId:e,...t}){await d();let a=await p(),i=a.findIndex(t=>t.paymentIntentId===e);return i>=0&&(a[i]={...a[i],...t}),await r().writeFile(u,JSON.stringify(a,null,2),"utf-8"),{ok:!0}}async function v(){return await d(),JSON.parse(await r().readFile(c,"utf-8")||"{}")}async function y(e){let t={...await v(),...e};return await r().writeFile(c,JSON.stringify(t,null,2),"utf-8"),t}let h=async()=>(await d(),JSON.parse(await r().readFile(l,"utf-8")||"[]")),m=async e=>r().writeFile(l,JSON.stringify(e,null,2),"utf-8");async function g(e){let t=await h();if(t.some(t=>t.code===e.code))throw Error("Code d\xe9j\xe0 existant");return t.unshift({...e,createdAt:new Date().toISOString(),status:"active",redemptions:[]}),await m(t),e}async function S(e){return(await h()).find(t=>t.stripeSessionId===e)||null}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[948,972],()=>a(613));module.exports=i})();