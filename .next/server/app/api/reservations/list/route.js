"use strict";(()=>{var t={};t.id=144,t.ids=[144],t.modules={399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3292:t=>{t.exports=require("fs/promises")},1017:t=>{t.exports=require("path")},7652:(t,e,a)=>{a.r(e),a.d(e,{originalPathname:()=>f,patchFetch:()=>y,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>w,staticGenerationAsyncStorage:()=>p});var i={};a.r(i),a.d(i,{GET:()=>c});var r=a(9303),n=a(8716),s=a(670),o=a(7070),u=a(8847);async function c(){try{let t=await (0,u.KQ)();return o.NextResponse.json({reservations:t})}catch(t){return o.NextResponse.json({error:t.message},{status:400})}}let l=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/reservations/list/route",pathname:"/api/reservations/list",filename:"route",bundlePath:"app/api/reservations/list/route"},resolvedPagePath:"C:\\Users\\Nina\\Downloads\\ty-koad-v5_1\\ty-koad-demo-v5.1\\app\\api\\reservations\\list\\route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:w}=l,f="/api/reservations/list/route";function y(){return(0,s.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:p})}},8847:(t,e,a)=>{a.d(e,{$:()=>g,KQ:()=>p,bA:()=>f,iD:()=>w,iE:()=>y,k3:()=>x,v6:()=>v});var i=a(3292),r=a.n(i),n=a(1017),s=a.n(n);let o=s().join(process.cwd(),"data"),u=s().join(o,"reservations.json"),c=s().join(o,"config.json"),l=s().join(o,"vouchers.json");async function d(){await r().mkdir(o,{recursive:!0});try{await r().access(u)}catch{await r().writeFile(u,"[]","utf-8")}try{await r().access(c)}catch{await r().writeFile(c,JSON.stringify({icalC1:"",icalC2:""},null,2),"utf-8")}try{await r().access(l)}catch{await r().writeFile(l,"[]","utf-8")}}async function p(){return await d(),JSON.parse(await r().readFile(u,"utf-8")||"[]")}async function w(t){await d();let e=await p();return e.unshift({...t,createdAt:new Date().toISOString()}),await r().writeFile(u,JSON.stringify(e,null,2),"utf-8"),{ok:!0}}async function f({paymentIntentId:t,...e}){await d();let a=await p(),i=a.findIndex(e=>e.paymentIntentId===t);return i>=0&&(a[i]={...a[i],...e}),await r().writeFile(u,JSON.stringify(a,null,2),"utf-8"),{ok:!0}}async function y(){return await d(),JSON.parse(await r().readFile(c,"utf-8")||"{}")}async function v(t){let e={...await y(),...t};return await r().writeFile(c,JSON.stringify(e,null,2),"utf-8"),e}let h=async()=>(await d(),JSON.parse(await r().readFile(l,"utf-8")||"[]")),m=async t=>r().writeFile(l,JSON.stringify(t,null,2),"utf-8");async function g(t){let e=await h();if(e.some(e=>e.code===t.code))throw Error("Code d\xe9j\xe0 existant");return e.unshift({...t,createdAt:new Date().toISOString(),status:"active",redemptions:[]}),await m(e),t}async function x(t){return(await h()).find(e=>e.stripeSessionId===t)||null}}};var e=require("../../../../webpack-runtime.js");e.C(t);var a=t=>e(e.s=t),i=e.X(0,[948,972],()=>a(7652));module.exports=i})();